<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Migren Araştırma Projesi</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body {font-family: 'Inter', sans-serif; background:#0f172a; color:#e2e8f0; margin:0; padding:0;}
    .container {max-width:800px; margin:20px auto; padding:20px; background:#1e293b; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.5);}
    h1, h2 {color:#60a5fa; text-align:center;}
    p {line-height:1.7;}
    .step {display:none;}
    .step.active {display:block;}
    input, select, textarea {width:100%; padding:12px; margin:10px 0; border-radius:8px; border:none; background:#334155; color:white;}
    label {display:block; margin:15px 0 5px; font-weight:500;}
    button {background:#60a5fa; color:white; padding:14px 30px; border:none; border-radius:8px; cursor:pointer; font-size:16px; margin:10px 5px;}
    button:hover {background:#3b82f6;}
    .progress {height:8px; background:#334155; border-radius:4px; margin:20px 0;}
    .progress-bar {height:100%; background:#60a5fa; width:0%; border-radius:4px; transition:width 0.4s;}
    .checkbox-label {display:flex; align-items:center; gap:12px; font-weight:normal; margin:12px 0; flex-wrap:wrap;}
    .final-buttons {text-align:center; margin:30px 0;}
  </style>
</head>
<body>
<div class="container">

  <!-- 0. Hoş Geldiniz + Proje Tanıtımı -->
  <div id="step-0" class="step active">
    <h1>Migren Araştırmasına Hoş Geldiniz</h1>
    <p>Merhaba, ben [Adınız Soyadınız], nöroloji alanında çalışan bir araştırmacıyım.</p>
    <p>Bu proje ile migren hastalarının günlük yaşamlarını, tetikleyicilerini ve hastalık şiddetini daha iyi anlamayı amaçlıyorum. Topladığımız tüm veriler <strong>sadece bilimsel araştırma amacıyla</strong> kullanılacak ve hiçbir şekilde üçüncü kişilerle paylaşılmayacaktır.</p>
    <p>Katılım tamamen gönüllülük esasına dayalıdır ve istediğiniz zaman vazgeçebilirsiniz.</p>
    <div style="text-align:center; margin:30px 0;">
      <button onclick="nextStep(1)">Devam Et →</button>
    </div>
  </div>

  <!-- 1. KVKK Onay -->
  <div id="step-1" class="step">
    <h2>Kişisel Verilerin Korunması (KVKK) Aydınlatma Metni</h2>
    <p>Topladığımız bilgiler sadece bu araştırma kapsamında kullanılacak ve yalnızca araştırmacı ve iş birliği yaptığı akademisyenlerle paylaşılacaktır. Veriler anonimleştirilerek bilimsel makalelerde kullanılabilir.</p>
    <p><strong>Bilgilerimin yukarıda belirtilen şekilde kullanılmasını kabul ediyor musunuz?</strong></p>
    <div style="text-align:center; margin:40px 0;">
      <button style="background:#ef4444;" onclick="Swal.fire('Üzgünüz','KVKK onayı olmadan devam edemezsiniz. İleride tekrar denemek isterseniz bekleriz. ❤️')">Hayır</button>
      <button onclick="nextStep(2)">Evet, kabul ediyorum</button>
    </div>
  </div>

  <!-- 2. İletişim Bilgileri (KVKK’dan sonra) -->
  <div id="step-2" class="step">
    <h2>İletişim Bilgileriniz</h2>
    <p>Araştırma sonuçlarını ve ileride yapacağımız çalışmaları sizinle paylaşabilmek için lütfen aşağıdaki bilgileri giriniz.</p>
    <label>Ad Soyad <span style="color:#fba0a0;">*</span></label>
    <input type="text" id="fullName" required placeholder="Ayşe Yılmaz">
    <label>Telefon Numarası <span style="color:#fba0a0;">*</span></label>
    <input type="tel" id="phone" required placeholder="05xx xxx xx xx">
    <label>E-posta Adresi <span style="color:#fba0a0;">*</span></label>
    <input type="email" id="email" required placeholder="ornek@mail.com">
    <div style="text-align:center; margin:30px 0;">
      <button onclick="saveAndNext(2,3)">İleri →</button>
    </div>
  </div>

  <!-- İlerleme Çubuğu -->
  <div class="progress"><div class="progress-bar" id="progress"></div></div>

  <!-- 3. Demografik Bilgiler (step-3 oldu) -->
  <div id="step-3" class="step">
    <h2>1. Demografik Bilgiler</h2>
    <label>Yaşınız</label><input type="number" id="age" required>
    <label>Cinsiyet</label>
    <select id="gender"><option value="">Seçiniz</option><option>Erkek</option><option>Kadın</option><option>Diğer</option><option>Belirtmek istemiyorum</option></select>
    <label>Eğitim seviyeniz</label>
    <select id="education"><option value="">Seçiniz</option><option>İlkokul</option><option>Ortaokul</option><option>Lise</option><option>Üniversite</option><option>Yüksek Lisans/Doktora</option></select>
    <label>Çalışma durumu</label>
    <select id="work"><option value="">Seçiniz</option><option>Çalışıyorum</option><option>Çalışmıyorum</option><option>Emekli</option><option>Öğrenci</option></select>
    <div style="text-align:center;"><button onclick="saveAndNext(3,4)">İleri →</button></div>
  </div>

  <!-- Diğer adımlar (4-8) aynı kalıyor, sadece id numaraları 1'er arttı -->
  <div id="step-4" class="step"><h2>2. Migreniniz Var mı?</h2><!-- aynı içerik --></div>
  <div id="step-5" class="step"><h2>3. Migren Ataklarınızın Özellikleri</h2><!-- aynı --></div>
  <div id="step-6" class="step"><h2>4. Tetikleyiciler ve Yaşam Tarzı</h2><!-- aynı --></div>
  <div id="step-7" class="step"><h2>5. Son Kısım: MIDAS Ölçeği</h2><!-- aynı --></div>
  <div id="step-8" class="step"><h2>MIDAS Migren Engellilik Değerlendirme Ölçeği</h2><!-- aynı --></div>

</div>

<script>
  const totalSteps = 9; // 1 adım eklendi
  let currentStep = 0;

  function nextStep(n) {
    { ... } // aynı
  function saveAndNext(current, next) { saveData(); nextStep(next); }

  function updateProgress() {
    const percent = (currentStep / (totalSteps-1)) * 100;
    $('#progress').css('width', percent + '%');
  }

  function saveData() {
    const data = {
      fullName: $('#fullName').val(),
      phone: $('#phone').val(),
      email: $('#email').val(),
      age: $('#age').val(),
      // ... diğer tüm alanlar aynı
      timestamp: new Date().toISOString()
    };
    localStorage.setItem('migrenSurveyData', JSON.stringify(data));
  }

  // finishSurvey ve diğer fonksiyonlar aynı kalıyor
  const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx8i9v5i4oK8z9vX8v7g7f6e5d4c3b2a1z0y9x8w7v6u5t4r3e2d1c/exec";
  // geri kalan script aynı
</script>
</body>
</html>
